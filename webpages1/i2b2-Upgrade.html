<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>i2b2-Upgrade</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
    }
    .header {
      background-color: #337ab7;
      color: white;
      padding: 15px;
      font-size: 24px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 999;
    }
    .sidebar {
      position: fixed;
      top: 70px;
      left: 0;
      width: 250px;
      bottom: 0;
      padding: 20px;
      background-color: #fafafa;
      border-right: 1px solid #ddd;
      overflow-y: auto;
      z-index: 998;
    }
    .content {
      margin-top: 70px;
      margin-left: 320px;
      padding: 20px;
    }
    .sidebar-root {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .sidebar-page, .sidebar-h1 {
      margin-bottom: 6px;
    }
    .sidebar-toggle {
      cursor: pointer;
      font-weight: bold;
      margin-right: 5px;
      color: #555;
    }
    .h1-list, .h2-list {
      list-style: none;
      margin: 0 0 0 15px;
      padding: 0;
      display: none; /* Keep sidebar collapsed */
    }
    a {
      text-decoration: none;
      color: #337ab7;
    }
    a:hover {
      text-decoration: underline;
    }
    .h2-toggle {
      cursor: pointer;
      border: none;
      background: none;
      font-size: 18px;
      font-weight: bold;
      margin-right: 5px;
    }
    .collapsible-section {
      display: block; /* Expand all H2 sections by default */
      margin-left: 20px;
    }
    pre code {
      background-color: #f0f0f0;
      padding: 5px;
      display: block;
      overflow-x: auto;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="header">i2b2-Upgrade</div>
  <div class="sidebar"><ul class="sidebar-root"><li class="sidebar-page"><span class="sidebar-toggle">+ </span><a href="Home.html">Home</a><ul class="h1-list" style="display:none;"><li class="sidebar-h1"><a href="Home.html#i2b2-documentation">i2b2 Documentation</a></li></ul></li><li class="sidebar-page"><span class="sidebar-toggle">+ </span><a href="Quick-Start.html">Quick-Start</a><ul class="h1-list" style="display:none;"><li class="sidebar-h1"><span class="sidebar-toggle">+ </span><a href="Quick-Start.html#quick-start---demo-install-guide">Quick Start - Demo install Guide</a><ul class="h2-list" style="display:none;"><li class="sidebar-h2"><a href="Quick-Start.html#prerequisites">Prerequisites</a></li><li class="sidebar-h2"><a href="Quick-Start.html#installation-instructions">Installation Instructions</a></li><li class="sidebar-h2"><a href="Quick-Start.html#troubleshooting-guide">Troubleshooting Guide</a></li><li class="sidebar-h2"><a href="Quick-Start.html#fresh-installation">Fresh Installation</a></li></ul></li></ul></li><li class="sidebar-page"><span class="sidebar-toggle">+ </span><a href="Production-Install.html">Production-Install</a><ul class="h1-list" style="display:none;"><li class="sidebar-h1"><span class="sidebar-toggle">+ </span><a href="Production-Install.html#i2b2-production-deployment-guide">i2b2 Production Deployment Guide</a><ul class="h2-list" style="display:none;"><li class="sidebar-h2"><a href="Production-Install.html#1.-setting-up-subnets-in-the-cloud">1. Setting up Subnets in the Cloud</a></li><li class="sidebar-h2"><a href="Production-Install.html#2.-setting-up-postgresql-database">2. Setting up PostgreSQL Database</a></li><li class="sidebar-h2"><a href="Production-Install.html#3.-deploying-i2b2-client-containers-and-connecting-to-the-production-database">3. Deploying i2b2 Client Containers and Connecting to the Production Database</a></li><li class="sidebar-h2"><a href="Production-Install.html#4.-custom-configuration">4. Custom Configuration</a></li></ul></li></ul></li><li class="sidebar-page"><span class="sidebar-toggle">+ </span><a href="i2b2-Upgrade.html">i2b2-Upgrade</a><ul class="h1-list" style="display:none;"><li class="sidebar-h1"><span class="sidebar-toggle">+ </span><a href="i2b2-Upgrade.html#i2b2-upgrade-guide">i2b2 Upgrade Guide</a><ul class="h2-list" style="display:none;"><li class="sidebar-h2"><a href="i2b2-Upgrade.html#step-1:-navigate-to-the-i2b2-docker-directory">Step 1: Navigate to the i2b2-docker Directory</a></li><li class="sidebar-h2"><a href="i2b2-Upgrade.html#step-2:-checkout-the-new-release-branch">Step 2: Checkout the New Release Branch</a></li><li class="sidebar-h2"><a href="i2b2-Upgrade.html#step-3:-stop-running-containers">Step 3: Stop Running Containers</a></li><li class="sidebar-h2"><a href="i2b2-Upgrade.html#step-4:-pull-the-latest-images">Step 4: Pull the Latest Images</a></li><li class="sidebar-h2"><a href="i2b2-Upgrade.html#step-5:-start-the-updated-containers">Step 5: Start the Updated Containers</a></li><li class="sidebar-h2"><a href="i2b2-Upgrade.html#step-6:-wait-for-initialization">Step 6: Wait for Initialization</a></li></ul></li></ul></li><li class="sidebar-page"><span class="sidebar-toggle">+ </span><a href="i2b2-Admin-Module.html">i2b2-Admin-Module</a><ul class="h1-list" style="display:none;"><li class="sidebar-h1"><a href="i2b2-Admin-Module.html#i2b2-administration-module-guide">i2b2 Administration Module Guide</a></li></ul></li></ul></div>
  <div class="content"><div><h1 id="i2b2-upgrade-guide">i2b2 Upgrade Guide</h1><p>This guide provides the recommended procedures for upgrading your i2b2 instance to a newer version.</p><hr/><h2 id="step-1:-navigate-to-the-i2b2-docker-directory"><button class="h2-toggle">+</button>Step 1: Navigate to the i2b2-docker Directory</h2><div class="collapsible-section" style="display:none;"><p>Ensure you are in the correct directory before starting the upgrade:</p><pre class="codehilite"><code class="language-bash">cd i2b2-docker
</code></pre><hr/></div><h2 id="step-2:-checkout-the-new-release-branch"><button class="h2-toggle">+</button>Step 2: Checkout the New Release Branch</h2><div class="collapsible-section" style="display:none;"><p>Ensure you are checking out the correct branch based on your installation type.</p><p><strong>Options:</strong><br/>
- <strong>Localhost deployment</strong>  tag = <version>
- <strong>Production/Remote database deployment</strong> tag = <version>_production  </version></version></p><p>Execute the following commands:</p><pre class="codehilite"><code class="language-bash">git checkout &lt;new_release_tag&gt;
git pull
</code></pre><hr/></div><h2 id="step-3:-stop-running-containers"><button class="h2-toggle">+</button>Step 3: Stop Running Containers</h2><div class="collapsible-section" style="display:none;"><p>Before pulling the latest updates, stop all running containers:</p><pre class="codehilite"><code class="language-bash">docker-compose down
</code></pre><hr/></div><h2 id="step-4:-pull-the-latest-images"><button class="h2-toggle">+</button>Step 4: Pull the Latest Images</h2><div class="collapsible-section" style="display:none;"><p>Fetch the latest updates from the repository:</p><pre class="codehilite"><code class="language-bash">docker-compose pull
</code></pre><hr/></div><h2 id="step-5:-start-the-updated-containers"><button class="h2-toggle">+</button>Step 5: Start the Updated Containers</h2><div class="collapsible-section" style="display:none;"><p>Restart the i2b2 Webclient and Core Server containers:</p><pre class="codehilite"><code class="language-bash">docker-compose up -d i2b2-webclient
</code></pre><hr/></div><h2 id="step-6:-wait-for-initialization"><button class="h2-toggle">+</button>Step 6: Wait for Initialization</h2><div class="collapsible-section" style="display:none;"><p>Allow a few moments for the containers to initialize and for <strong>Core Server</strong> to start completely.</p><p>For troubleshooting, refer to the Troubleshooting Guide on Quick Start page.</p><hr/><p>This completes the upgrade process for i2b2. If you encounter issues, check the logs or refer to the official i2b2 documentation.</p></div></div></div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var toggles = document.querySelectorAll(".sidebar-toggle");
      toggles.forEach(function(toggle) {
        var ul = toggle.parentElement.querySelector("ul");
        toggle.addEventListener("click", function() {
          if (ul) {
            if (ul.style.display === "none" || ul.style.display === "") {
              ul.style.display = "block";
              toggle.textContent = "- ";
            } else {
              ul.style.display = "none";
              toggle.textContent = "+ ";
            }
          }
        });
      });

      var h2Toggles = document.querySelectorAll(".h2-toggle");
      h2Toggles.forEach(function(btn) {
        var collapsible = btn.parentNode.nextElementSibling;
        if (collapsible && collapsible.classList.contains("collapsible-section")) {
          collapsible.style.display = "block"; // Expand all H2 sections
          btn.textContent = "-"; // Update toggle button
        }
        btn.addEventListener("click", function() {
          if (collapsible.style.display === "none") {
            collapsible.style.display = "block";
            btn.textContent = "-";
          } else {
            collapsible.style.display = "none";
            btn.textContent = "+";
          }
        });
      });

      function expandSectionFromHash() {
        if (window.location.hash) {
          var targetId = window.location.hash.substring(1); 
          var targetElement = document.getElementById(targetId);
          if (targetElement) {
            var collapsible = targetElement.nextElementSibling;
            if (collapsible && collapsible.classList.contains("collapsible-section")) {
              collapsible.style.display = "block";
              var toggleBtn = targetElement.querySelector(".h2-toggle");
              if (toggleBtn) toggleBtn.textContent = "-";
              
              setTimeout(function() {
                var headerHeight = document.querySelector(".header").offsetHeight;
                var elementPosition = targetElement.getBoundingClientRect().top + window.scrollY;
                window.scrollTo({ top: elementPosition - headerHeight - 10, behavior: "smooth" });
              }, 100);
            }
          }
        }
      }

      expandSectionFromHash();
      window.addEventListener("hashchange", expandSectionFromHash);

      var currentPage = window.location.pathname.split("/").pop();
      var links = document.querySelectorAll(".sidebar a");
      links.forEach(function(link) {
        if (link.getAttribute("href") === currentPage) {
          link.style.fontWeight = "bold";
          var parent = link.closest("ul");
          while (parent && parent.classList.contains("h1-list")) {
            parent.style.display = "block";
            var toggle = parent.previousElementSibling.querySelector(".sidebar-toggle");
            if (toggle) toggle.textContent = "- ";
            parent = parent.parentElement.closest("ul");
          }
        }
      });
    });

    document.querySelectorAll('h2').forEach((el, i) => {
    const marker = document.createElement('div');
    marker.textContent = `###H2###-${el.innerText}`;
    marker.style.fontSize = '0px';
    marker.style.color = 'white';
    marker.style.position = 'relative';
    el.parentNode.insertBefore(marker, el);
  });

  
  </script>
</body>
</html>